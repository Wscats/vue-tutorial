# Vue

Vue on some of the study DEMO, as well as some of my understanding of the Vue and angular two framework, the integration of some of the documents, but also can be forkstar

## Vue文档

| Article | |
| --------- | --------- |
|[Vue-cli脚手架](https://github.com/Wscats/vue-tutorial/issues/2)|[Vue组件](https://github.com/Wscats/vue-tutorial/issues/3)|
|[vue自定义指令](https://github.com/Wscats/vue-tutorial/issues/8)|[Vue过渡动画](https://github.com/Wscats/vue-tutorial/issues/9)|
|[Vue指令](https://github.com/Wscats/vue-tutorial/issues/7)|[Vue api文档](https://github.com/Wscats/vue-tutorial/issues/6)|
|[Vue执行ajax请求](https://github.com/Wscats/vue-tutorial/issues/5)|[vue实现类似angular服务的方法](https://github.com/Wscats/vue-tutorial/issues/4)|
|[Vue源码参考文档](https://github.com/Wscats/vue-tutorial/issues/10)||

## AppDemo
| Demo | |
| --------- | --------- |
|[新闻列表DEMO(1)](https://wscats.github.io/vue-tutorial/新闻列表.html)|[新闻列表DEMO(2)](https://wscats.github.io/vue-tutorial/news/index.html)|
|[CNode社区DEMO](https://wscats.github.io/vue-tutorial/cnode-vue-demo/public/)|[图灵机器人](https://wscats.github.io/vue-tutorial/图灵机器人.html)|

## 生命周期
| Demo | |
| --------- | --------- |
|[Vue生命周期](https://wscats.github.io/vue-tutorial/vue生命周期.html)|[Vue的$nextTick](https://wscats.github.io/vue-tutorial/vue中的$nextTick.html)|
|[Vue触发组件销毁](https://wscats.github.io/vue-tutorial/vue销毁组件.html)||

## 路由
| Controller | |
| --------- | --------- |
|[路由(v1)demo](https://wscats.github.io/vue-tutorial/路由.html)|[路由(v1)demo2](https://wscats.github.io/vue-tutorial/路由2.html)|
|[路由(v2)实例demo](https://wscats.github.io/vue-tutorial/vue-router2/news.html)||


## 指令
| Directive | |
| --------- | --------- |
|[指令demo](https://wscats.github.io/vue-tutorial/指令.html)|[自定义指令demo](https://wscats.github.io/vue-tutorial/自定义指令.html)|
|[滑动手势demo](https://wscats.github.io/vue-tutorial/滑动手势指令.html)|[搜索框聚焦指令](https://wscats.github.io/vue-tutorial/自定义搜索框聚焦指令.html)|
|[置顶指令](https://wscats.github.io/vue-tutorial/vue自定义置顶指令.html)|[下拉刷新](https://wscats.github.io/vue-tutorial/下拉刷新.html)|
|[ref获取节点](https://wscats.github.io/vue-tutorial/vue的ref.html)|[指令实现属性过滤](https://wscats.github.io/vue-tutorial/指令实现属性过滤.html)|
|[旋转图形的登录验证](https://wscats.github.io/vue-tutorial/vue图形登录验证.html)|[吸顶菜单](https://wscats.github.io/vue-tutorial/吸顶菜单.html)|


## 过滤器
| Filter ||
| --------- | --------- |
|[过滤器demo](https://wscats.github.io/vue-tutorial/过滤器.html)|[过滤器实现分页demo](https://wscats.github.io/vue-tutorial/vue使用过滤器实现分页.html)|
|[过滤器读写数据](https://wscats.github.io/vue-tutorial/vue过滤器读写数据.html)|[自定义搜索关键词高亮](https://wscats.github.io/vue-tutorial/自定义搜索关键词高亮.html)|

## 过渡
| Transition | |
| --------- | --------- |
|[过渡demo](https://wscats.github.io/vue-tutorial/过渡.html)|[过渡demo2](https://wscats.github.io/vue-tutorial/过渡2.html)|
|[列表筛选和过渡效果](https://wscats.github.io/vue-tutorial/vue列表筛选和过渡效果.html)|[过渡v2](https://wscats.github.io/vue-tutorial/vue2过渡.html)|

## 表单
| Form ||
| --------- | --------- |
|[获取表单值](https://wscats.github.io/vue-tutorial/vue获取表单值.html)|[购物车逻辑](https://wscats.github.io/vue-tutorial/vue多选框全选和单选逻辑.html)|

## 计算
| Computed ||
| --------- | --------- |
|[计算属性](https://wscats.github.io/vue-tutorial/vue计算属性.html)|[列表筛选和过渡效果](https://wscats.github.io/vue-tutorial/vue列表筛选和过渡效果.html)|
|[旋转图形的登录验证](https://wscats.github.io/vue-tutorial/vue图形登录验证.html)|[收藏功能](https://wscats.github.io/vue-tutorial/vue计算属性实现收藏.html)|

## 组件
| Component ||
| --------- | --------- |
|[组件demo](https://wscats.github.io/vue-tutorial/组件.html)|[点击预览大图](https://wscats.github.io/vue-tutorial/预览图片.html)|
|[新闻列表DEMO](https://wscats.github.io/vue-tutorial/新闻列表.html)|[$emit和$on实现非父子组件通信](https://wscats.github.io/vue-tutorial/通过$emit和$on实现非父子组件通信.html)|

## Vuex
| Vuex |
| --------- |
|[Vuex组件间的通信](https://wscats.github.io/vue-tutorial/vuex组件间的通信demo.html)|

## 其他
| Other ||
| --------- | --------- |
|[调用百度地图接口实现查询路线直线距离](https://wscats.github.io/vue-tutorial/vue调用百度地图接口实现查询路线直线距离.html)|[配合Echarts图表](https://wscats.github.io/vue-tutorial/vue和echarts.html)|

## 安装

先安装1.X的版本
```javascript
npm install vue@1
```
新建index.html，引入`vue.js`文件
Vue比Angular轻,Vue的源码比较小

```javascript
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<script src="js/vue.js"></script>
	<body>
		<!--V-->
		<div id="demo">
			<p>{{name}}</p>
		</div>
	</body>
	<script>
		new Vue({
			el: "#demo",//element
			//M
			data: {
				name: "w"
			}
		})
	</script>
</html>
```
一般用id来绑定new Vue中的el，因为id具有唯一性，当然事实上class也是可以的，但不建议使用

## 指令
指令，以属性值呈现在便签上，实现某类方法的复用

下面是Vue和Angular指令的简单对比，发现Vue总是简洁点

|Angular指令|Vue指令|Vue指令|
|-|-|-|
|ng-show|v-show||
|ng-hide|v-else||
|ng-if|v-if||
|ng-repeat|v-for||
|ng-model|v-model||
|ng-click|v-on:click|@click|
|ng-change|v-on:change|@change|
|ng-keyup|v-on:keyup|@keyup|
|ng-class|v-bind:class|:class|
|ng-style|v-bind:style|:class|
|ng-bind|v-text|`{{}}`|
|ng-bind-html|v-html|`{{{}}}`|
|ng-controller|无|无|
|ng-app|无|无|

## 自定义指令
Vue.directive（指令的名字,接受一个对象）
### 全局定义
```javascript
Vue.directive('color',{
	bind:function(){
		
	}
})
```
### 局部定义
```javascript
new Vue({
	directives: {
		dirName: { //定义指令}
	}
});
```
对象里面有常用三个属性值:`bind,update,unbind`，全部属性如下表
|属性值|用法|
|-|-|
|bind|只调用一次，指令第一次绑定到元素时调用，用这个钩子函数可以定义一个在绑定时执行一次的初始化动作|
|inserted|被绑定元素插入父节点时调用（父节点存在即可调用，不必存在于 document 中）|
|update|被绑定元素所在的模板更新时调用，而不论绑定值是否变化。通过比较更新前后的绑定值，可以忽略不必要的模板更新|
|componentUpdated|被绑定元素所在模板完成一次更新周期时调用|
|unbind|只调用一次， 指令与元素解绑时调用|

使用指令要加前缀v-

**定义：**
```javascript
Vue.directive('color',{...})
```
**使用：**
```javascript
<p v-color="yellow">{{name}}</p>
```

## 内置过滤器
1.x有内置过滤器2.x已经移除大部分，但自定义过滤器还是有

注意Angular和Vue使用内置过滤器时候，接受参数的语法是不一样的
```javascript
//Angular语法
{{num|currency:"￥" 1}}
//Vue语法
{{num|currency "￥" 1}}
```

|Angular过滤器|Vue过滤器|
|-|-|
|uppercase|uppercase|
|lowercase|lowercase|
|currency|currency|
|filter|filterBy|
|limiteTo|limiteBy|
|orderBy|orderBy|
|json|json|
|无|number|
|无|date|
|无|capitalize|
|无|pluralize|
|无|debounce|

### uppercase和lowercase
让字符串全部大写或者小写
```javascript
//Model
message: "Wscats"
//View
{{message | uppercase}}
```

### capitalize

让首字母大写
```javascript
//Model
message: "wscats"
//View
{{message | capitalize}}//Wscats
```

### currency
让数字变成金钱格式和小数点
```javascript
{{message | currency '￥' "1"}}
```
参数:
1. 第一个参数是货币符号`String` 默认值: "$"
2. 第二个参数是小数位`Number` 默认值: 2

### pluralize
如果只有一个参数，复数形式只是简单地在末尾添加一个 “s”。如果有多个参数，参数被当作一个字符串数组，对应一个、两个、三个…复数词。如果值的个数多于参数的个数，多出的使用最后一个参数
```javascript
{{message | pluralize 'item'}}
```

### debounce
1. 限制： 需在@里面使用
2. 参数：毫秒 默认值：300
3. 功能：包装处理器，让它延迟执行xxx ms， 默认延迟300ms，包装后的处理器在调用之后至少将延迟xxx ms，如果在延迟结束前再次调用，延迟时长重置为xxx ms
```javascript
disappear: function(){
	document.getElementById("btn").style.display= "none";
}
<button id="btn" @click="disappear|debounce 10000">点击我,我将10秒后消失</button>
```

### limitBy
1. 限制：需在v-for(即数组)里面使用
2. 两个参数：
	1. 第一个参数:取得数量
	2. 第二个参数:偏移量


 ```javascript
 <li v-for="item in items|limitBy 10 0">{{item}}</li>
 ```

### filterBy
1. 限制:需在v-for(即数组)里面使用
2. 三个参数:
	1. 第一个参数: 需要搜索的字符串
	2. 第二个参数: in(可选,指定搜寻位置)
	3. 第三个参数: (可选,数组格式)

```javascript
<li v-for="item in items|filterBy 'Wscats' in 'name' 'dada' ">{{item}}</li>
```
### orderBy
1. 限制:需在v-for(即数组)里面使用
2. 三个参数:
	1. 第一个参数: String，Array，Function类型都得，需要搜索的字符串
	2. 第二个参数: 接受字符串，可选参数order决定结果升序（order >= 0）或降序（order < 0）,默认是升序，这里跟Angular接受布尔值不一样，Vue是接受正负值


## 自定义过滤器
1. 全局方法`Vue.filter()`注册一个自定义过滤器，必须放在Vue实例化前面
2. 过滤器函数始终以表达式的值作为第一个参数。带引号的参数视为字符串，而不带引号的参数按表达式计算
3. 可以设置两个过滤器参数,前提是这两个过滤器处理的不冲突
4. 用户从input输入的数据在回传到model之前也可以先处理

分别为下面这几种情况：

过滤器函数始终以表达式的值作为第一个参数。带引号的参数视为字符串，而不带引号的参数按表达式计算。
```javascript
<p>{{num | WscatsCal 10 20}}</p>
```
添加两个过滤器,注意不要冲突
```javascript
<p>{{num | sum | currency }}</p>
```
从input输入的数据在回传到model之前也可以先处理
```javascript
<input type="text" v-model="message | change">
```
全局方法 `Vue.filter()`注册一个自定义过滤器，必须放在Vue实例化前面
```javascript
Vue.filter("WscatsCal", function(){})
new Vue({});
```
上面的例子直接注册在Vue全局上面，其他不用这个过滤器的实例也会被迫接受，其实过滤器可以注册在实例内部，仅在使用它的实例里面注册
换言之就系Vue既可以全局注册过滤器，也可以局部注册过滤器，这点相比Angular来说是个优点


## 组件
1. 第一步是用构造器定义`Vue.extend`
2. 第二步注册`Vue.component`
3. 把组件的标签放到对应的视图上

### 创建组件的步骤
```javascript
var Wscats = Vue.extend({//第一步:定义
	template: '<p>我是Oaoafly Wscats</p>'
})
Vue.component('myWscats', Wscats)//第二步:注册到Vue上面(这里是全局注册)
var myDemo = new Vue({//第三步:创建实例化
	el: '#demo'
})
```
除了上面的全局注册组件，也可以局部注册组件，如下面代码
```javascript
<div id="demo">
	<p>{{name}}</p>
	<first-compenent></first-compenent>
</div>
//JS
var Wscats = Vue.extend({
	template: "<p>这是第一个组件</p>"
}) 
//注册
Vue.component("firstCompenent", aaa)
new Vue({
	el: "#demo",
	data: {
		name: "组件DEMO"
	},
	components: {
		firstCompenent: Wscats
	}
})
```
可以用`<template>`标签将模板写在外面，这样比较容易编写代码
注意此处必须是id，用class不行
```javascript
<template id="#WscatsCp">
	<div>我是Oaoafly Wscats</div>
</template>
```
```javascript
components: {
	WscatsCp: {
		template: '#WscatsCp'
	}
}
```

## Vuex
安装vuex
```
cnpm install vuex
```
引入JS，记得在vue后面引入
```javascript
<script src="js/vuex.js"></script>
```
定义vuex状态管理的仓库
```javascript
var store = new Vuex.Store({
	//存储数据的地方
	state: {
		name: "新闻",
		author: "wscats",
		searchName: ""
	},
	mutations: {
		//改变值的方法
		changeName: function(state, a) {
			state.name = a
		},
		changesearchName: function(state, a) {
			state.searchName = a
		}
	},
	//获取数据的方法
	getters: {
		getName: function(state) {
			return state.name
		}
	}
})
```
把store注入到构造器里面
```javascript
new Vue({
	el: "#demo",
	components: {},
	store //注入store
})
```
获取vuex中的state的值
利用`this.$store.state.searchName`获取值
```javascript
computed: {
		searchName: function() {
			//vuex的state里面拿数据
			return this.$store.state.searchName
		},
	},
	//也可以用方法来获取
	methods: {
		getSearchName: function() {
			//vuex的state里面拿数据
			this.searchName = this.$store.state.searchName
		},
	},
```
设置vuex中的state的值
commit的第一个参数是触发vuex中的mutations的函数，让它帮我们修改对应的值
```javascript
this.$store.commit('changesearchName',this.searchName)
```
